class AccessibleMap{constructor(e){this._layers=e.layers,this._description=e.description}onAdd(e){this._map=e,this._mapcontainer=e._container,this._mapcontainer.setAttribute("aria-label",this._description+"Use the directional arrows to explore points of interest on the map."),this._mapcontainer.setAttribute("aria-live","assertive"),this._container=document.createElement("div"),this._container.className="maplibre-accessibility-ctrl";const t=document.createElement("div");t.classList.add("feature-selector"),t.style.position="fixed",t.style.borderStyle="solid",t.style.borderWidth="5px",t.style.borderRadius="5px",t.style.top="50%",t.style.left="50%",t.style.marginTop="-100px",t.style.marginLeft="-100px",t.style.width="200px",t.style.height="200px",this._container.appendChild(t);const i=document.createElement("div");return i.setAttribute("id","features"),i.setAttribute("aria-live","assertive"),i.style.fontSize="22px",i.style.width="400px",i.style.height="50vh",i.style.marginRight="0",i.style.marginLeft="auto",i.style.backgroundColor="white",this._container.appendChild(i),this._map.on("moveend",this.moveEnd.bind(this)),this._map.once("idle",this.idleMap.bind(this)),this._container}onRemove(){this._container.parentNode?.removeChild(this._container),this._map=void 0}displayProperties(){var e=this._map.project(this._map.getCenter());this._map.queryRenderedFeatures([[e.x-100,e.y-100],[e.x+100,e.y+100]],{layers:this._layers}).map((function(e,t){document.getElementById("features").innerHTML+='<div class="featureProperties" arialabel= "'+e.properties.name+'" tabindex="'+(t+2)+'">'+(t+1)+". "+e.properties.name+"</div>",document.getElementsByClassName("featureProperties")[t].style.outline="2px solid black",document.getElementsByClassName("featureProperties")[t].style.padding="20px",document.getElementsByClassName("featureProperties")[t].style.borderRadius="5px"}))}bindDirectionKeys(){var e=this._map.getBearing();document.onkeydown=t=>{switch(t.keyCode){case 37:document.getElementById("features").innerHTML="Moving "+this.bearingToDirection(e-90);break;case 38:document.getElementById("features").innerHTML="Moving "+this.bearingToDirection(e);break;case 39:document.getElementById("features").innerHTML="Moving "+this.bearingToDirection(e+90);break;case 40:document.getElementById("features").innerHTML="Moving "+this.bearingToDirection(e+180)}}}bearingToDirection(e){var t=this.makeBearingPositive(e);switch(!0){case t<30:return"North";case t<=60:return"Northeast";case t<=120:return"East";case t<=150:return"Southeast";case t<=210:return"South";case t<=240:return"Southwest";case t<=300:return"West";case t<=330:return"Northwest";case t<=360:return"North";default:console.log("Default")}}makeBearingPositive(e){return e<0?e+360:e}moveEnd(){document.getElementById("features").innerHTML="",this.displayProperties()}idleMap(){this.displayProperties(),this.bindDirectionKeys()}}
